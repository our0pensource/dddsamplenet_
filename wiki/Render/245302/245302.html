<div class="wikidoc"><h1>DDD building blocks in context of DDDSample.Net</h1>
Information about Domain Driven Design building blocks in original DDDSample can be found <a href="http://dddsample.sourceforge.net/characterization.html">here</a>. This article is a brief description of an approach we have chosen in DDDSample.Net and highlight differences in the way DDDSample and DDDSample.Net works.<br /><a name="Aggregates"></a>
<h2>Aggregates</h2>
The following image shows all three aggregates present in DDDSample.NET: Cargo, Handling and Location.<br /><br /><img src="http://download-codeplex.sec.s-msft.com/Download?ProjectName=dddsamplenet&DownloadId=109988" alt="Domain.png" title="Domain.png" /><br /><br /><b>Cargo</b> contains logic responsible for manipulating Cargo objects from administrator point of view as well as logic used to calculate various parameters describing current state of cargo delivery. It&#39;s root is Cargo entity.<br /><br /><b>Handling</b> aggregate represents the same concept of cargo, but is dedicated to handling event registration logic.<br /><br /><b>Location</b> is part of supporting subdomain which models location concepts such as <a href="http://en.wikipedia.org/wiki/UN/LOCODE">UN/LOCODE</a>.<br /><br /><a name="Entities"></a>
<h2>Entities</h2>
Entities are the stars of the domain model. They are the most valuable elements in terms of business logic contained. They usually represent the most important real life concepts - those which have its own identity.<br /><br />In DDDSample <i>entities</i> are quite rare. In fact small <i>entities</i> to <i>value objects</i> ratio seems to differentiate mature domain models from anemic ones. There are 4 entities in the original code and only three in current (0.6) version of DDDSample.Net (we don&#39;t support Voyages).<br /><br /><b>Cargo</b> entity is the main one. It is a container for the majority of domain logic. Cargo consists of numerous helper <i>value objects</i>, like <b>Itinerary</b> and <b>Delivery</b>. Cargo has a very well defined concept of identity: the <b>TrackingId</b> <i>value object</i> represents a unique number each cargo piece is assigned when booking. This tracking id is probably printed on a box, container or whatever is used to transport the cargo so it has a strong real life representation.<br /><br /><b>Location</b> is an entity which represents a place where cargoes being are handled, for example a port. Locations also have strong identity concept--they are identified by established <a href="http://en.wikipedia.org/wiki/UN/LOCODE">UN/LOCODE</a> standard codes.<br /><br /><b>HandlingEvent</b> is a <i>domain event</i>. It is a kind of entity which is, unlike normal <i>entities</i>, immutable after creation. There is a slight difference between DDDSample and DDDSample.Net in modeling HandlingEvents. They are <i>aggregate roots</i> in the original version, but we made them parts of a HandlingHistory <i>aggregate</i> in our .NET version. More about our reasoning can be found in <i>domain events</i> section.<br /><a name="ValueObjects"></a>
<h2>Value Objects</h2>
Value objects are those elements of domain model that do not have their own identity, only the data. Two instances of a particular <i>value object</i> are the same if they contain the same data.<br /><br />There is a lot of value objects in the DDDSample domain model. There are three major groups of them:
<ul><li>those which create structure of the domain model</li>
<li>those which enable model to be more granular</li>
<li>those which make model more explicit</li></ul>
Here are some examples. <b>Leg</b> is a <i>value object</i> which a part of domain model just because it represents real life concept of leg--a step of an itinerary. There is nothing special about it. Leg contains only data (starting and ending location and time) and two legs containing same data are totally interchangeable.<br /><br /><b>Itinerary</b> is a container for legs. It represents the route for a particular cargo. It could be implemented alternatively either as an <i>entity</i> or by incorporating its role into role of Cargo <i>entity</i> (there would be no Itinerary object then). The first alternative would make an Itinerary modifiable (it is read-only as a <i>value object</i>), but would introduce a false concept of identity--there is no identity in the Itinerary in the real life. The second one would assign yet another responsibility to Cargo <i>entity</i> which also is not a good idea. The best approach seems to be the one implemented in DDDSample(.Net)--Itinerary as a <i>value object</i>. It makes Cargo aggregate more granular and each of its individual objects more focused on their primary role.<br /><br /><b>TrackingId</b> is an identifier for a piece of cargo. It is a <i>value object</i> which primary role is to make a model more explicit. Yes, we could model cargo tracking id as a string, but wrapping that string into <i>value object</i> makes code (and remember, code is the ultimate model) more readable since at first look we know what is the business meaning of this &#39;string&#39;.</div><div class="ClearBoth"></div>