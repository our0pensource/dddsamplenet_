<div class="wikidoc"><h1>Design patterns used in DDDSample.Net</h1>
<h2>Aggregate</h2>
Aggregate is subset of model of particular bounded context. Aggregate contains one or many entities and has exactly one &#39;root&#39; -- an object which is a facade of whole aggregate. No external objects can hold reference to any internal aggregate objects other than its root. Identities of internal aggregate objects are scoped within their aggregate. Only the aggregate roots can be directly, through Repositories, retrieved from the persistent storage backing the model. All the other objects must be reachable by traversing model relations.<br /><br />Aggregates help to structure the domain model. They promote encapsulation of logic. Aggregates can be seen either as a property of a model itself (<a href="http://www.amazon.com/Domain-Driven-Design-Tackling-Complexity-Software/dp/0321125215">DDD book</a>) or as a means of structuring logic in particular use cases. <br /><br />Aggregates are also significant from technical perspective: their provide boundaries for transactional behaviour and thus allow scaling the model.<br /><br />See <a href="https://dddsamplenet.codeplex.com/wikipage?title=DDD%20building%20blocks%20in%20DDDSample.Net&referringTitle=Patterns%20reference&ANCHOR#Aggregates">aggregate discussion</a> for classic version of DDDSample.Net<br />
<h2>Event</h2>
Great description of event-related concepts in the domain model can be found on <a href="http://codebetter.com/blogs/gregyoung/archive/2010/04/11/what-is-a-domain-event.aspx">Greg Young&#39;s blog</a>. There are three different usages of this concept in DDDSample.Net.<br /><br /><b>Modeling changes as events</b><br /><br />First one introduces a new kind of element into the model. The Event has some characteristics of an Entity (own thread of identity) and some of a Value Object (should be immutable after creation). Events of this kind are used to make changes to the model explicit. <br /><br />In classic version of DDDSample.Net, <a href="http://dddsamplenet.codeplex.com/SourceControl/changeset/view/42592#531521">the HandlingEvent</a> object is an example of Entity pattern. <br /><br /><b>Publishing changes using events</b><br /><br />Second incarnation of event concept is used to publish the changes rather then model them. It has been popularized by Udi Dahan and his <a href="http://www.udidahan.com/2008/02/29/how-to-create-fully-encapsulated-domain-models/">blog</a> <a href="http://www.udidahan.com/2008/08/25/domain-events-take-2/">post</a> <a href="http://www.udidahan.com/2009/06/14/domain-events-salvation/">series</a>. Is is a behavioural pattern which solves the problem of getting data out of domain model without breaking its encapsulation. The solution is to enable domain objects to publish the data in form of events which as delivered to all registered listeners / handlers. Domain Events pattern is not means to solve performance issues as it assumes synchronous event handling on the same thread.<br /><br />Domain Events are widely used in most DDDSample.Net versions. For example, in classic version they are used to pass information between Cargo and Handling aggregates. The <a href="http://dddsamplenet.codeplex.com/SourceControl/changeset/view/42592#531520">infrastructure</a> that enables usage of this pattern is fairly small. Is is based on solution published by Udi. You can see example of code raising events <a href="http://dddsamplenet.codeplex.com/SourceControl/changeset/view/42592#519295">here</a> and a corresponding event handler <a href="http://dddsamplenet.codeplex.com/SourceControl/changeset/view/42592#531513">here</a>.<br /><br />Third incarnation is the Event Sourcing pattern which is described later.<br />
<h2>Entity</h2>
An Entity represents a domain concept with its own thread of identity. This unique identity, rather than attribute values, define the Entity instance.<br />
<h2>Value Object</h2>
A Value Object represents a domain concept defined entirely by its attributes. It has no unique identity and two Value Object instances with same attributes can be considered as same. <br />
<h2>Repository</h2>
A Repository is a supporting element in the domain model. It does not represent any real-world concept. A repository is bound to an aggregate and is used to manage the middle phase of lifecycle of aggregate root objects -- persist and retrieve from persistent form. <br />
<h2>Domain Service</h2>
A Domain Service represents a stateless real-world concept. If a behavior cannot be bound to any Entities or Value Objects, it can be represented as a stand-alone Domain Service. <br /><br />There is one Domain Service in DDDSample.Net -- the RoutingService. It is represented differently in various versions. In the most direct port of Java DDDSample, vanilla version, RoutingService is represented by an interface placed in the domain model. Its implementation, however, is not considered a part of the model. Rather than, it is an anti-corruption layer which translates between domain model&#39;s ubiquitous language and external graph traversal service API.<br />In the Layered Model version RoutingService is a part of Decision Support layer. Both interface and implementation in placed in the domain model assembly. This is because in this version implementation is not only responsible for translating to other API but also for applying various policies to the route selection process (such as customer-specified best-route policy).<br />
<h2>Event Sourcing</h2>
<h1>Architectural patterns used in DDDSample.Net</h1>
<h2>Layered Architecture</h2><h2>CQRS</h2></div><div class="ClearBoth"></div>