<div class="wikidoc"><h1>CQRS variant of DDDSample.Net</h1><a name="Aggregates"></a>
<h2>Aggregates</h2>
The following image shows that in CQRS variant there are only two (co,pared to there in vanilla version) aggregates present: Cargo and Location.<br /><br /><img src="http://download-codeplex.sec.s-msft.com/Download?ProjectName=dddsamplenet&DownloadId=109989" alt="Domain.png" title="Domain.png" /><br /><br /><b>Cargo</b> contains logic responsible for manipulating Cargo objects from both administrative and customer&#39;s point of view. Note that <span class="codeInline">Delivery</span> object describing current state of cargo delivery was removed from the aggregate. It&#39;s is, however, present in the codebase but only as a transient object which is published through <a href="http://www.udidahan.com/2009/06/14/domain-events-salvation">Domain Events</a> pattern immediately after creation. Handling event entities have been attached to Cargo aggregate and redundant Handling aggregate was removed. It&#39;s sole purpose was to allow asynchronous handling event processing. This requirement is fulfilled by CQRS design itself.<br /><br /><b>Location</b> is part of supporting subdomain which models location concepts such as <a href="http://en.wikipedia.org/wiki/UN/LOCODE">UN/LOCODE</a>.<br /><a name="Entities"></a>
<h2>Entities</h2>
There are only three entities in CQRS variant of DDDSample.Net:<br /><br /><b>Cargo</b> entity is the main one.<br /><br /><b>Location</b> is an entity which represents a place where cargoes being are handled, for example a port. Locations also have strong identity concept--they are identified by established <a href="http://en.wikipedia.org/wiki/UN/LOCODE">UN/LOCODE</a> standard codes.<br /><br /><b>HandlingEvent</b> represents simple cargo handling activity. It has been moved from it&#39;s own Handling aggregate to the Cargo aggregate.<br /><a name="ValueObjects"></a><br /><a name="Reporting"></a>
<h2>Reporting model</h2>
In addition to domain model, CQRS variant of DDDSample.Net contains also a <i>reporting model</i>. This is a view of domain from querying and reporting perspective. It could be described as a <a href="http://www.udidahan.com/2009/12/09/clarified-cqrs/">persistent view model</a>: a data store which can be directly bound to search and details controls of user interface. The following picture shows simplicity of reporting model in DDDSample.Net:<br /><img src="http://download-codeplex.sec.s-msft.com/Download?ProjectName=dddsamplenet&DownloadId=109990" alt="Reporting.png" title="Reporting.png" /><br />It contains only two objects: <span class="codeInline">Cargo</span> and <span class="codeInline">Delivery</span>. The former represents persistent properties of a cargo, such as route specification and itinerary. The latter contains the temporary state calculated after processing every handling event. There is a collection of <span class="codeInline">Delivery</span>s associated with each <span class="codeInline">Cargo</span> and each <span class="codeInline">Cargo</span> instance points to a most recent one as its current state.</div><div class="ClearBoth"></div>